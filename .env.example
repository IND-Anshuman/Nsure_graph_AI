# =============================================================================
# API KEYS (REQUIRED - Choose at least one)
# =============================================================================
# Google Gemini API Key (recommended)
# General pool (comma-separated keys)
GOOGLE_API_KEY=your_google_api_key_here

# Task-specific pools (optional, overrides general pool for that task)
# Best for pinning specific keys to high-load processes
GOOGLE_API_KEY_ENTITY=your_entity_key_here
GOOGLE_API_KEY_RELATION=your_relation_key_here
GOOGLE_API_KEY_QA=your_qa_key_here

# Gemini Model Selection
# Available models: gemini-2.0-flash, gemini-1.5-pro, gemini-1.5-flash
GEMINI_MODEL=gemini-2.0-flash

# API Rate Limiting (Requests Per Minute)
# Free tier is usually 15 RPM. Paid tier (Pay-as-you-go) is higher.
GEMINI_RPM=15
# Specific override for high-load relation extraction (Phase 5)
GEMINI_RPM_RELATION=8

# OpenAI API Key (alternative or fallback)
OPENAI_API_KEY=your_openai_api_key_here


# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================
# Flask API server settings
KG_API_HOST=127.0.0.1
KG_API_PORT=5000
KG_API_DEBUG=0

# API cache and upload directories
KG_API_CACHE_DIR=outputs/api_cache
KG_API_UPLOAD_DIR=outputs/api_uploads
KG_API_GRAPHS_DIR=outputs/api_graphs

# Allow local file paths (0=disabled, 1=enabled)
KG_ALLOW_LOCAL_PATH=0


# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================
# Embedding model for semantic search
KG_EMBEDDING_MODEL=sentence-transformers/all-mpnet-base-v2
KG_EMBEDDING_DIM=768
KG_EMBEDDING_BATCH_SIZE=128
KG_EMBEDDING_LOCAL_ONLY=1
KG_EMBEDDING_SHOW_PROGRESS=0

# Embedding cache backend (sqlite or json)
KG_EMBEDDING_CACHE_BACKEND=sqlite
KG_EMBEDDING_SQLITE_PATH=cache_embeddings.sqlite3


# =============================================================================
# DOCUMENT PROCESSING
# =============================================================================
# Document processing settings
KG_DOC_WORKERS=4
KG_SOURCES_CACHE_DIR=outputs/sources_cache

# SpaCy NLP settings
KG_SPACY_N_PROCESS=4
KG_SPACY_BATCH_SIZE=100

# Sentence processing
KG_MIN_SENTENCE_CHARS=20
KG_SENTENCE_DEDUP_OVERLAP=0.85


# =============================================================================
# ENTITY & RELATION EXTRACTION
# =============================================================================
# Extraction Strategy (oneshot or cluster)
KG_EXTRACTION_STRATEGY=oneshot
KG_ONESHOT_WINDOW_SIZE=8000
KG_ONESHOT_WINDOW_OVERLAP=2000

# Entity merging
KG_DISABLE_ENTITY_MERGE=0
KG_ENTITY_MERGE_THRESHOLD=0.95


# =============================================================================
# COMMUNITY DETECTION
# =============================================================================
# Community detection settings
KG_COMMUNITY_MIN_SIZE=3
KG_COMMUNITY_MAX_LEVELS=
KG_COMMUNITY_ENTITY_SAMPLE=10
KG_MIN_COMMUNITY_NODE_SIZE=2

# Community detection method and resolution
KG_COMMUNITY_METHOD=auto
KG_COMMUNITY_RESOLUTION=1.0
KG_COMMUNITY_MIN_EDGE_WEIGHT=0.0
KG_COMMUNITY_MODULARITY_FLOOR=0.000001
KG_SKIP_DEGENERATE_COMMUNITY_LEVELS=1

# Community hub downweighting
KG_COMMUNITY_HUB_DOWNWEIGHT=1
KG_COMMUNITY_HUB_DEGREE_PCTL=0.98
KG_COMMUNITY_HUB_PENALTY=0.2

# Community fragment penalty
KG_COMMUNITY_FRAGMENT_PENALTY=0.08

# Community domain inclusion
KG_COMMUNITY_INCLUDE_DOMAIN=0

# Semantic partitioning
KG_SEMANTIC_PART_COMMUNITIES=1

# Community summaries
KG_DISABLE_COMMUNITY_SUMMARIES=0
KG_COMMUNITY_SUMMARY_WORKERS=4
KG_RELATION_WORKERS=4
KG_RELATION_BATCH_SIZE=10
KG_COMMUNITY_SUMMARY_MAX_SENTENCES=20


# =============================================================================
# RETRIEVAL & SEARCH
# =============================================================================
# Hybrid search settings
KG_FORCE_CTX_PER_ARTICLE=12
KG_FORCE_REL_PER_ARTICLE=30

# Retrieval parameters
KG_TOP_N_SEMANTIC=30
KG_TOP_K_FINAL=60
KG_RERANK_TOP_K=30


# =============================================================================
# Q&A PROCESSING
# =============================================================================
# Parallel question answering
KG_QA_MAX_WORKERS=4
KG_QA_WORKERS=4


# =============================================================================
# NEO4J (OPTIONAL)
# =============================================================================
# Neo4j database connection (optional, set skip_neo4j=true in API to disable)
NEO4J_URI=bolt://127.0.0.1:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=
